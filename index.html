<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mighty Swell - Nielsen Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    .bar { transition: width 0.3s ease; }
    .donut-segment { transition: all 0.3s ease; }
  </style>
</head>
<body class="bg-gray-50">
  <div id="app"></div>

  <script>
    // Data
    const periodData = {
      '4': {
        totalSales: 192713,
        totalYoYChange: -0.3632,
        channelData: [
          { name: 'FMCG', value: 89630, change: -0.356, percentage: 46.5, color: '#0ea5e9' },
          { name: 'Liquor', value: 77836, change: -0.436, percentage: 40.4, color: '#8b5cf6' },
          { name: 'Convenience', value: 25088, change: 0.215, percentage: 13.0, color: '#10b981' }
        ],
        stateData: [
          { name: 'FL', fullName: 'Florida', sales: 59041, change: -0.028 },
          { name: 'TX', fullName: 'Texas', sales: 44891, change: 0.028 },
          { name: 'NC', fullName: 'North Carolina', sales: 18752, change: -0.247 },
          { name: 'NJ', fullName: 'New Jersey', sales: 15439, change: -0.423 },
          { name: 'IL', fullName: 'Illinois', sales: 7843, change: -0.354 },
          { name: 'OH', fullName: 'Ohio', sales: 7362, change: -0.482 },
          { name: 'WI', fullName: 'Wisconsin', sales: 3604, change: -0.358 }
        ]
      },
      '13': {
        totalSales: 671860,
        totalYoYChange: -0.3581,
        channelData: [
          { name: 'FMCG', value: 312415, change: -0.356, percentage: 46.5, color: '#0ea5e9' },
          { name: 'Liquor', value: 271311, change: -0.436, percentage: 40.4, color: '#8b5cf6' },
          { name: 'Convenience', value: 87388, change: 0.215, percentage: 13.0, color: '#10b981' }
        ],
        stateData: [
          { name: 'FL', fullName: 'Florida', sales: 205943, change: -0.028 },
          { name: 'TX', fullName: 'Texas', sales: 156530, change: 0.028 },
          { name: 'NC', fullName: 'North Carolina', sales: 65392, change: -0.247 },
          { name: 'NJ', fullName: 'New Jersey', sales: 53827, change: -0.423 },
          { name: 'IL', fullName: 'Illinois', sales: 27346, change: -0.354 },
          { name: 'OH', fullName: 'Ohio', sales: 25670, change: -0.482 },
          { name: 'WI', fullName: 'Wisconsin', sales: 12566, change: -0.358 }
        ]
      },
      '26': {
        totalSales: 1543025,
        totalYoYChange: -0.3822,
        channelData: [
          { name: 'FMCG', value: 717507, change: -0.356, percentage: 46.5, color: '#0ea5e9' },
          { name: 'Liquor', value: 622983, change: -0.436, percentage: 40.4, color: '#8b5cf6' },
          { name: 'Convenience', value: 200593, change: 0.215, percentage: 13.0, color: '#10b981' }
        ],
        stateData: [
          { name: 'FL', fullName: 'Florida', sales: 472821, change: -0.028 },
          { name: 'TX', fullName: 'Texas', sales: 359304, change: 0.028 },
          { name: 'NC', fullName: 'North Carolina', sales: 150140, change: -0.247 },
          { name: 'NJ', fullName: 'New Jersey', sales: 123606, change: -0.423 },
          { name: 'IL', fullName: 'Illinois', sales: 62801, change: -0.354 },
          { name: 'OH', fullName: 'Ohio', sales: 58975, change: -0.482 },
          { name: 'WI', fullName: 'Wisconsin', sales: 28855, change: -0.358 }
        ]
      },
      '52': {
        totalSales: 3136538,
        totalYoYChange: -0.4228,
        channelData: [
          { name: 'FMCG', value: 1460210, change: -0.356, percentage: 46.5, color: '#0ea5e9' },
          { name: 'Liquor', value: 1267807, change: -0.436, percentage: 40.4, color: '#8b5cf6' },
          { name: 'Convenience', value: 408369, change: 0.215, percentage: 13.0, color: '#10b981' }
        ],
        stateData: [
          { name: 'FL', fullName: 'Florida', sales: 961466, change: -0.028 },
          { name: 'TX', fullName: 'Texas', sales: 730984, change: 0.028 },
          { name: 'NC', fullName: 'North Carolina', sales: 305268, change: -0.247 },
          { name: 'NJ', fullName: 'New Jersey', sales: 251353, change: -0.423 },
          { name: 'IL', fullName: 'Illinois', sales: 127675, change: -0.354 },
          { name: 'OH', fullName: 'Ohio', sales: 119872, change: -0.482 },
          { name: 'WI', fullName: 'Wisconsin', sales: 58666, change: -0.358 }
        ]
      }
    };

    let activePage = 'overview';
    let timePeriod = '52';

    function formatCurrency(value) {
      if (value >= 1000000) return `$${(value / 1000000).toFixed(2)}M`;
      return `$${(value / 1000).toFixed(0)}K`;
    }

    function getCurrentData() {
      return periodData[timePeriod];
    }

    function createMetricCard(title, value, change, icon) {
      const isPositive = change >= 0;
      const arrow = isPositive ? '‚Üë' : '‚Üì';
      const colorClass = isPositive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700';
      
      return `
        <div class="bg-white rounded-lg shadow-md p-5">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-medium text-gray-600">${title}</h3>
            <span class="text-gray-400">${icon}</span>
          </div>
          <div class="text-3xl font-bold text-gray-900 mb-2">${formatCurrency(value)}</div>
          <div class="flex items-center">
            <div class="text-sm font-semibold px-2 py-1 rounded ${colorClass}">
              ${arrow} ${Math.abs(change * 100).toFixed(1)}% vs Year-Ago
            </div>
          </div>
        </div>
      `;
    }

    function createBarChart(data, maxValue) {
      return data.map(item => {
        const percentage = (item.sales / maxValue) * 100;
        const colorClass = item.change >= 0 ? 'bg-green-500' : 'bg-red-500';
        return `
          <div class="mb-4">
            <div class="flex justify-between mb-1">
              <span class="text-sm font-medium text-gray-700">${item.name}</span>
              <span class="text-sm text-gray-600">$${Math.round(item.sales / 1000)}K</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-6">
              <div class="bar ${colorClass} h-6 rounded-full flex items-center justify-end pr-2" style="width: ${percentage}%">
                <span class="text-xs text-white font-semibold">${(item.change * 100).toFixed(1)}%</span>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    function createDonutChart(channelData) {
      return `
        <div class="flex items-center justify-center">
          <div class="relative" style="width: 200px; height: 200px;">
            <svg viewBox="0 0 100 100" class="transform -rotate-90">
              ${channelData.map((channel, i) => {
                const startAngle = channelData.slice(0, i).reduce((sum, c) => sum + c.percentage, 0) * 3.6;
                const endAngle = startAngle + (channel.percentage * 3.6);
                const largeArc = channel.percentage > 50 ? 1 : 0;
                
                const startX = 50 + 35 * Math.cos((startAngle - 90) * Math.PI / 180);
                const startY = 50 + 35 * Math.sin((startAngle - 90) * Math.PI / 180);
                const endX = 50 + 35 * Math.cos((endAngle - 90) * Math.PI / 180);
                const endY = 50 + 35 * Math.sin((endAngle - 90) * Math.PI / 180);
                
                return `
                  <path d="M 50 50 L ${startX} ${startY} A 35 35 0 ${largeArc} 1 ${endX} ${endY} Z" 
                        fill="${channel.color}" 
                        stroke="white" 
                        stroke-width="1"/>
                `;
              }).join('')}
              <circle cx="50" cy="50" r="20" fill="white"/>
            </svg>
          </div>
          <div class="ml-8">
            ${channelData.map(channel => `
              <div class="flex items-center mb-2">
                <div class="w-4 h-4 rounded mr-2" style="background-color: ${channel.color}"></div>
                <span class="text-sm text-gray-700">${channel.name} (${channel.percentage.toFixed(1)}%)</span>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderOverview() {
      const data = getCurrentData();
      const maxSales = Math.max(...data.stateData.map(s => s.sales));
      
      return `
        <div>
          <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6">
            ${createMetricCard('Total Sales', data.totalSales, data.totalYoYChange, 'üí∞')}
            ${createMetricCard('FMCG Sales', data.channelData[0].value, data.channelData[0].change, 'üõí')}
            ${createMetricCard('Liquor Sales', data.channelData[1].value, data.channelData[1].change, 'üè¢')}
            ${createMetricCard('Convenience Sales', data.channelData[2].value, data.channelData[2].change, 'üè™')}
            ${createMetricCard(\`Top Market (\${data.stateData[0].name})\`, data.stateData[0].sales, data.stateData[0].change, 'üìç')}
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div class="bg-white rounded-lg shadow-md p-6">
              <h2 class="text-lg font-bold text-gray-900 mb-4">Channel Sales Breakdown</h2>
              ${createDonutChart(data.channelData)}
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
              <h2 class="text-lg font-bold text-gray-900 mb-4">Top States by Sales</h2>
              ${createBarChart(data.stateData.slice(0, 5), maxSales)}
            </div>
          </div>

          <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-lg font-bold text-gray-900 mb-4">Performance Summary</h2>
            <div class="space-y-3">
              ${data.channelData.map(channel => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                  <span class="font-medium">${channel.name}</span>
                  <span class="text-gray-600">${formatCurrency(channel.value)} (${channel.percentage}%)</span>
                  <span class="${channel.change >= 0 ? 'text-green-600' : 'text-red-600'} font-semibold">
                    ${(channel.change * 100).toFixed(1)}% vs YA
                  </span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function renderRegions() {
      const data = getCurrentData();
      const maxSales = Math.max(...data.stateData.map(s => s.sales));
      
      return `
        <div>
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Regional Performance (${timePeriod} Weeks)</h2>
          
          <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Sales by State</h3>
            ${createBarChart(data.stateData, maxSales)}
          </div>

          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Detailed State Performance</h3>
            <table class="w-full">
              <thead class="bg-gray-50 border-b">
                <tr>
                  <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rank</th>
                  <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">State</th>
                  <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">Sales</th>
                  <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">% of Total</th>
                  <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">YoY</th>
                </tr>
              </thead>
              <tbody class="divide-y">
                ${data.stateData.map((state, i) => `
                  <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-sm">${i + 1}</td>
                    <td class="px-4 py-3 text-sm font-medium">${state.fullName}</td>
                    <td class="px-4 py-3 text-sm text-right">$${Math.round(state.sales / 1000)}K</td>
                    <td class="px-4 py-3 text-sm text-right">${((state.sales / data.totalSales) * 100).toFixed(1)}%</td>
                    <td class="px-4 py-3 text-sm text-right">
                      <span class="px-2 py-1 rounded text-xs font-medium ${
                        state.change >= 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                      }">
                        ${state.change >= 0 ? '‚Üë' : '‚Üì'} ${Math.abs(state.change * 100).toFixed(1)}%
                      </span>
                    </td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </div>
      `;
    }

    function renderPerformance() {
      const data = getCurrentData();
      
      return `
        <div>
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Performance Analysis (${timePeriod} Weeks)</h2>
          
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            ${data.channelData.map(channel => `
              <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-bold">${channel.name}</h3>
                  <span class="text-2xl">${channel.change >= 0 ? 'üìà' : 'üìâ'}</span>
                </div>
                <div class="text-3xl font-bold mb-2">${formatCurrency(channel.value)}</div>
                <div class="text-sm text-gray-600 mb-3">${channel.percentage.toFixed(1)}% of total</div>
                <div class="text-lg font-semibold ${channel.change >= 0 ? 'text-green-600' : 'text-red-600'}">
                  ${channel.change >= 0 ? '+' : ''}${(channel.change * 100).toFixed(1)}% vs Year-Ago
                </div>
              </div>
            `).join('')}
          </div>

          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-900 mb-4">Key Insights</h3>
            <div class="space-y-4">
              <div class="border-l-4 border-green-500 pl-4 py-2">
                <h4 class="font-semibold text-gray-900">Convenience Channel Growth</h4>
                <p class="text-sm text-gray-600">
                  Convenience stores showing positive growth at +21.5% YoY, indicating strong momentum.
                </p>
              </div>
              <div class="border-l-4 border-blue-500 pl-4 py-2">
                <h4 class="font-semibold text-gray-900">Regional Opportunities</h4>
                <p class="text-sm text-gray-600">
                  Florida and Texas together account for 54% of total sales, representing core markets.
                </p>
              </div>
              <div class="border-l-4 border-red-500 pl-4 py-2">
                <h4 class="font-semibold text-gray-900">Channel Challenges</h4>
                <p class="text-sm text-gray-600">
                  FMCG (-35.6%) and Liquor (-43.6%) channels showing significant YoY declines.
                </p>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function render() {
      const data = getCurrentData();
      
      const app = document.getElementById('app');
      app.innerHTML = `
        <div class="min-h-screen">
          <!-- Header -->
          <div class="bg-white border-b border-gray-200 px-6 py-4">
            <h1 class="text-2xl font-bold text-gray-900">Mighty Swell - Nielsen Market Performance</h1>
            <p class="text-sm text-gray-500">Period Ending: 01/03/2026</p>
          </div>

          <!-- Navigation -->
          <div class="bg-white border-b border-gray-200 px-6">
            <div class="flex gap-6">
              <button onclick="setPage('overview')" class="py-3 px-1 border-b-2 font-medium text-sm ${
                activePage === 'overview' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
              }">
                Executive Overview
              </button>
              <button onclick="setPage('regions')" class="py-3 px-1 border-b-2 font-medium text-sm ${
                activePage === 'regions' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
              }">
                Top Regions
              </button>
              <button onclick="setPage('performance')" class="py-3 px-1 border-b-2 font-medium text-sm ${
                activePage === 'performance' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
              }">
                Performance Analysis
              </button>
            </div>
          </div>

          <!-- Time Period Filter -->
          <div class="bg-white border-b border-gray-200 px-6 py-4">
            <div class="flex items-center gap-4">
              <span class="text-sm font-medium text-gray-700">Time Period:</span>
              <div class="flex gap-2">
                ${['4', '13', '26', '52'].map(period => `
                  <button onclick="setPeriod('${period}')" class="px-4 py-2 rounded-lg font-medium text-sm transition-all ${
                    timePeriod === period
                      ? 'bg-blue-600 text-white shadow-md'
                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                  }">
                    ${period} Weeks
                  </button>
                `).join('')}
              </div>
            </div>
          </div>

          <!-- Content -->
          <div class="p-6">
            ${activePage === 'overview' ? renderOverview() : activePage === 'regions' ? renderRegions() : renderPerformance()}
          </div>

          <!-- Footer -->
          <div class="bg-white border-t border-gray-200 px-6 py-3 text-center">
            <p class="text-xs text-gray-500">
              Data Source: Nielsen | ${timePeriod} Week Total: ${formatCurrency(data.totalSales)} | Period Ending: 01/03/2026
            </p>
          </div>
        </div>
      `;
    }

    window.setPage = function(page) {
      activePage = page;
      render();
    };

    window.setPeriod = function(period) {
      timePeriod = period;
      render();
    };

    // Initial render
    render();
  </script>
</body>
</html>
